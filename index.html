<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reaction Image Shop</title>
<style>
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #1e1e2f; color: #fff; padding: 20px; }
h1 { text-align: center; margin-bottom: 30px; font-size: 2.5em; color: #ff7f50; text-shadow: 2px 2px #000; }
#search { width: 100%; padding: 15px; font-size: 18px; margin-bottom: 30px; border-radius: 10px; border: none; outline: none; }
#gallery { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px; }
.card { background: #2e2e3e; border-radius: 12px; padding: 10px; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.5); transition: transform 0.2s, box-shadow 0.2s; }
.card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.7); }
.card img { width: 100%; border-radius: 10px; cursor: pointer; }
.card p { margin: 10px 0 0 0; font-size: 16px; color: #ffb347; font-weight: bold; }
button.download { margin-top: 8px; padding: 6px 12px; font-size: 13px; cursor: pointer; border: none; border-radius: 8px; background: linear-gradient(45deg, #ff7f50, #ffb347); color: #fff; transition: background 0.3s; }
button.download:hover { background: linear-gradient(45deg, #ffb347, #ff7f50); }
</style>
</head>
<body>

<h1>Reaction Image Shop</h1>
<input id="search" placeholder="Search reactions..." />
<div id="gallery"></div>

<script src="https://unpkg.com/fuse.js"></script>
<script>
let reactions = [];

async function loadImages() {
  try {
    const response = await fetch('images.json');
    if (!response.ok) throw new Error('images.json not found');
    reactions = await response.json();
  } catch (err) {
    console.warn('Could not load images.json, starting with empty gallery');
    reactions = [];
  }

  const fuse = new Fuse(reactions, { keys: ['name', 'tags'] });
  const searchInput = document.getElementById('search');
  searchInput.addEventListener('input', e => {
    const results = fuse.search(e.target.value).map(r => r.item);
    renderGallery(results);
  });

  renderGallery(reactions);
}

function renderGallery(items) {
  const gallery = document.getElementById('gallery');
  gallery.innerHTML = items.map(img => `
    <div class="card">
      <img src="images/${img.file}" alt="${img.name}" onclick="copyLink('images/${img.file}')" />
      <p>${img.name}</p>
      <button class="download" onclick="downloadImage('images/${img.file}', '${img.name}')">Download</button>
    </div>
  `).join('');
}

function copyLink(url) {
  navigator.clipboard.writeText(window.location.origin + '/' + url);
  alert('Copied link to clipboard!');
}

function downloadImage(url, name) {
  const a = document.createElement('a');
  a.href = url;
  a.download = name;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
}

loadImages();
</script>
</body>
</html>
