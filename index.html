<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reaction Image Shop</title>
<style>
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #121212; color: #e0e0e0; padding: 20px; }
h1 { text-align: center; margin-bottom: 30px; font-size: 2.5em; color: #ffffff; }
#search { width: 100%; padding: 15px; font-size: 18px; margin-bottom: 30px; border-radius: 10px; border: none; outline: none; background: #1f1f1f; color: #e0e0e0; }
#gallery { display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 15px; }
.card { background: #1f1f2e; border-radius: 12px; padding: 10px; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.5); transition: transform 0.2s, box-shadow 0.2s; }
.card:hover { transform: translateY(-3px); box-shadow: 0 8px 15px rgba(0,0,0,0.6); }
.card img { width: 100%; height: auto; max-height: 120px; border-radius: 10px; cursor: pointer; object-fit: contain; }
.card p { margin: 8px 0 0 0; font-size: 14px; color: #ffffff; font-weight: bold; }
button.download { margin-top: 5px; padding: 5px 10px; font-size: 12px; cursor: pointer; border: none; border-radius: 8px; background: #2e2e3e; color: #e0e0e0; transition: background 0.3s; }
button.download:hover { background: #3a3a4e; }
</style>
</head>
<body>

<h1>Reaction Image Shop</h1>
<input id="search" placeholder="Search reactions..." />
<div id="gallery"></div>

<script src="https://unpkg.com/fuse.js"></script>
<script>
let reactions = [];

async function loadImages() {
  try {
    const response = await fetch('images.json');
    if (!response.ok) throw new Error('images.json not found');
    reactions = await response.json();
  } catch (err) {
    console.warn('Could not load images.json, starting with empty gallery');
    reactions = [];
  }

  const fuse = new Fuse(reactions, { keys: ['name', 'tags'] });
  const searchInput = document.getElementById('search');
  searchInput.addEventListener('input', e => {
    const results = fuse.search(e.target.value).map(r => r.item);
    renderGallery(results);
  });

  renderGallery(reactions);
}

function renderGallery(items) {
  const gallery = document.getElementById('gallery');
  gallery.innerHTML = items.map(img => `
    <div class="card">
      <img src="images/${img.file}" alt="${img.name}" onclick="copyLink('images/${img.file}')" />
      <p>${img.name}</p>
      <button class="download" onclick="downloadImage('images/${img.file}', '${img.name}')">Download</button>
    </div>
  `).join('');
}

function copyLink(url) {
  navigator.clipboard.writeText(window.location.origin + '/' + url);
  alert('Copied link to clipboard!');
}

function downloadImage(url, name) {
  const a = document.createElement('a');
  a.href = url;
  a.download = name;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
}

loadImages();
</script>
</body>
</html>
